
{
    "version": "2.0.0",
    "tasks": [
		{
            "label": "Compile logger object",
            "type": "shell",
            "command": "g++",
            "args": [
                "-I${workspaceFolder}/include",
                "-c",
                "${workspaceFolder}/src/logger.cpp",
                "-o",                
                "${workspaceFolder}/build/logger.o"
            ],
            "group": "build",
            "problemMatcher": ["$gcc"]
        },		
		{
            "label": "Compile utilities object",
            "type": "shell",
            "command": "g++",
            "args": [
                "-I${workspaceFolder}/include",
                "-c",
                "${workspaceFolder}/src/utilities.cpp",
                "-o",
                "${workspaceFolder}/build/utilities.o"
            ],
            "dependsOn": ["Compile logger object"],
            "group": "build",
            "problemMatcher": ["$gcc"]
        },
        {
            "label": "Compile configuration object",
            "type": "shell",
            "command": "g++",
            "args": [
                "-I${workspaceFolder}/include",
                "-c",
                "${workspaceFolder}/src/configuration.cpp",
                "-o",
                "${workspaceFolder}/build/configuration.o"
            ],
            "dependsOn": ["Compile utilities object"],
            "group": "build",
            "problemMatcher": ["$gcc"]
        },		
        {
            "label": "Compile EncoderBase object",
            "type": "shell",
            "command": "g++",
            "args": [
                "-I${workspaceFolder}/include",
                "-c",
                "${workspaceFolder}/src/EncoderBase.cpp",
                "-o",
                "${workspaceFolder}/build/EncoderBase.o"
            ],
            "dependsOn": ["Compile configuration object"],
            "group": "build",
            "problemMatcher": ["$gcc"]
        },
		{
            "label": "Compile Encoder_ffmpeg object",
            "type": "shell",
            "command": "g++",
            "args": [
                "-I${workspaceFolder}/include",
                "-c",
                "${workspaceFolder}/src/Encoder_ffmpeg.cpp",
                "-o",
                "${workspaceFolder}/build/Encoder_ffmpeg.o"
            ],
            "dependsOn": ["Compile EncoderBase object"],
            "group": "build",
            "problemMatcher": ["$gcc"]
        },
        {
            "label": "Compile Encoder_Handbrake object",
            "type": "shell",
            "command": "g++",
            "args": [
                "-I${workspaceFolder}/include",
                "-c",
                "${workspaceFolder}/src/Encoder_Handbrake.cpp",
                "-o",
                "${workspaceFolder}/build/Encoder_Handbrake.o"
            ],
            "dependsOn": ["Compile Encoder_ffmpeg object"],
            "group": "build",
            "problemMatcher": ["$gcc"]
        },
        {
            "label": "Compile EncoderFactory object",
            "type": "shell",
            "command": "g++",
            "args": [
                "-I${workspaceFolder}/include",
                "-c",
                "${workspaceFolder}/src/EncoderFactory.cpp",
                "-o",
                "${workspaceFolder}/build/EncoderFactory.o"
            ],
            "dependsOn": ["Compile Encoder_Handbrake object"],
            "group": "build",
            "problemMatcher": ["$gcc"]
        },
        {
			"label": "Create Static Library",
			"type": "shell",
			"command": "ar",
			"args": [
				"rcs",
				"${workspaceFolder}/build/libencoder_utilities.a",
				"${workspaceFolder}/build/logger.o",
				"${workspaceFolder}/build/configuration.o",
				"${workspaceFolder}/build/utilities.o",				
                "${workspaceFolder}/build/EncoderBase.o",
                "${workspaceFolder}/build/Encoder_ffmpeg.o",
                "${workspaceFolder}/build/Encoder_Handbrake.o",
                "${workspaceFolder}/build/EncoderFactory.o"
			],
            "dependsOn": ["Compile EncoderFactory object"],
			"group": "build",
			"problemMatcher": ["$gcc"]
		},
        {
            "label": "Build Main Program",
            "type": "shell",
            "command": "g++",  // Change this if using a different compiler
            "args": [
                "-g",  // Include debug inf
				// o
                "${workspaceFolder}/*.cpp",  // Specify your source files
                "-o",
                "${workspaceFolder}/bin/test",  // Adjust to your desired output file name
				"-L${workspaceFolder}/build",  // Path to your library if it's in a specific folder
				"-L/usr/local/lib",
				"-I/usr/local/include",
				"-l:libencoder_utilities.a",  // Name of your library without the prefix (e.g., 'lib' or '.a')
				"-lyaml-cpp"

            ],
            "dependsOn": ["Create Static Library"],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "problemMatcher": ["$gcc"]
        },
        {
            "label": "Build All",
            "dependsOn": [
                "Compile logger object",
                "Compile configuration object",
                "Compile utilities object",                
                "Compile EncoderBase object",
                "Compile Encoder_ffmpeg object",
                "Compile Encoder_Handbrake object",
                "Compile EncoderFactory object",
                "Create Static Library",
                "Build Main Program"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            }
        },
        {
            "label": "Clean",
            "type": "shell",
            "command": "rm",
            "args": [
                "-rf",
                "${workspaceFolder}/build/*",
                "${workspaceFolder}/bin/*"
            ],
            "group": "build",
            "problemMatcher": []
        }
    ]
}